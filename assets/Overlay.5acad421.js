import{bD as m,bE as e,bI as B,bJ as C,bW as F,bX as g,by as p,bs as k,bO as r,bP as v,bL as y}from"./vendor.619c3c28.js";import{I as d}from"./Icon.583548dc.js";import{D as S}from"./vant.8c46507c.js";import{u as h}from"./index.63fb4255.js";const w="_tabs_1wn8b_1",D="_tabs_nav_1wn8b_4",O="_selected_1wn8b_20";var f={tabs:w,tabs_nav:D,selected:O};const N=m({props:{selected:{type:String},classPrefix:{type:String},rerenderOnSelect:{type:Boolean,default:!1}},emits:["update:selected"],setup:(a,c)=>()=>{var i,_;const s=(_=(i=c.slots).default)==null?void 0:_.call(i);if(!s)return()=>null;if(s.some(t=>t.type!==P))throw new Error("<Tabs> only accepts <Tab> as children");const u=a.classPrefix;return e("div",{class:[f.tabs,u+"_tabs"]},[e("ol",{class:[f.tabs_nav,u+"_tabs_nav"]},[s.map(t=>{var o,l;return e("li",{onClick:()=>{var b;return c.emit("update:selected",(b=t.props)==null?void 0:b.value)},class:[((o=t.props)==null?void 0:o.value)===a.selected?[f.selected,u+"_selected"]:"",u+"_tabs_nav_item"]},[(l=t.props)==null?void 0:l.name])})]),a.rerenderOnSelect?e("div",{key:a.selected},[s.find(t=>{var o;return((o=t.props)==null?void 0:o.value)===a.selected})]):e("div",null,[s.map(t=>{var o;return B(e("div",null,[t]),[[C,((o=t.props)==null?void 0:o.value)===a.selected]])})])])}}),P=m({props:{name:{type:String,required:!0},value:{type:String,required:!0}},setup:(a,c)=>()=>{var s,u;return e("div",null,[(u=(s=c.slots).default)==null?void 0:u.call(s)])}}),T="_mask_12vaf_1",x="_email_12vaf_11",I="_overlay_12vaf_17",E="_currentUser_12vaf_28",U="_action_12vaf_34",A="_action_list_12vaf_40",M="_icon_12vaf_44";var n={mask:T,email:x,overlay:I,currentUser:E,action:U,action_list:A,icon:M};const R=m({props:{onClose:{type:Function}},setup:(a,c)=>{const s=h(),u=()=>{var l;(l=a.onClose)==null||l.call(a)},i=F(),_=g(),t=p();k(async()=>{const l=await s.mePromise;t.value=l==null?void 0:l.data.resource});const o=async()=>{await S.confirm({title:"\u786E\u8BA4",message:"\u4F60\u771F\u7684\u8981\u9000\u51FA\u767B\u5F55\u5417\uFF1F"}),localStorage.removeItem("jwt"),_.push(`/sign_in?return_to=${i.fullPath}`)};return()=>{var l;return e(y,null,[e("div",{class:n.mask,onClick:u},null),e("div",{class:n.overlay},[e("section",{class:n.currentUser},[t.value?e("div",null,[e("h2",{class:n.email},[(l=t.value)==null?void 0:l.email]),e("p",{onClick:o},[r("\u70B9\u51FB\u8FD9\u91CC\u9000\u51FA\u767B\u5F55")])]):e(v,{to:`/sign_in?return_to=${i.fullPath}`},{default:()=>[e("h2",null,[r("\u672A\u767B\u5F55\u7528\u6237")]),e("p",null,[r("\u70B9\u51FB\u8FD9\u91CC\u767B\u5F55")])]})]),e("nav",null,[e("ul",{class:n.action_list},[e("li",null,[e(v,{to:"/items/create",class:n.action},{default:()=>[e(d,{name:"add",class:n.icon},null),e("span",null,[r("\u5F00\u59CB\u8BB0\u8D26")])]})]),e("li",null,[e(v,{to:"/items",class:n.action},{default:()=>[e(d,{name:"pig",class:n.icon},null),e("span",null,[r("\u6211\u7684\u5B58\u94B1\u7F50")])]})]),e("li",null,[e(v,{to:"/statistics",class:n.action},{default:()=>[e(d,{name:"charts",class:n.icon},null),e("span",null,[r("\u7EDF\u8BA1\u56FE\u8868")])]})])])])])])}}}),j=m({setup:(a,c)=>{const s=p(!1),u=()=>{s.value=!s.value};return()=>e(y,null,[e(d,{name:"menu",class:n.icon,onClick:u},null),s.value&&e(R,{onClose:()=>s.value=!1},null)])}});export{j as O,N as T,P as a};
